<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>

    <div class="bg-slate-200 w-screen">

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>

        <section class="section max-w-96 h-screen bg-red-200 mx-auto">
            <video class="lazy-video my-auto w-full" data-src="https://player.vimeo.com/progressive_redirect/playback/998753578/rendition/1080p/file.mp4?loc=external&signature=bba3c56c98aa51c879d492c7369f2b977e6ef04ab57c9c17a6b71c290f7ed647" controls>
                <source type="video/mp4">
            </video>
        </section>


    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Fonction pour charger la vidéo
            function loadVideo(video) {
                const src = video.getAttribute('data-src');
                if (!src) return;

                const source = video.querySelector('source');
                source.setAttribute('src', src); // Charger la source de la vidéo
                video.load(); // Charger la vidéo dans le player
                video.removeAttribute('data-src'); // Supprimer l'attribut data-src après le chargement
            }

            // Options de l'IntersectionObserver
            const options = {
                root: null, // Viewport
                rootMargin: '200px', // Commence à charger quand la section est à 200px du viewport
                threshold: 0.1 // 10% de la section doit être visible
            };

            // Callback pour l'IntersectionObserver
            const observer = new IntersectionObserver(function (entries, observer) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const videos = entry.target.querySelectorAll('.lazy-video');
                        videos.forEach(video => loadVideo(video));
                        observer.unobserve(entry.target); // Désactiver l'observation après le chargement
                    }
                });
            }, options);

            // Observer chaque section
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => observer.observe(section));
        });


    </script>
</body>
</html>
